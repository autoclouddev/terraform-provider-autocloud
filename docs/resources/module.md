---
page_title: "autocloud_module Resource - AutoCloud"
subcategory: ""
description: |-
  Connect AutoCloud to a Terraform module for use in an infrastructure as code blueprint.
---

# Resource: autocloud_module

Connect AutoCloud to a Terraform module for use in an infrastructure as code blueprint.

The `autocloud_module` resource will fetch the source of the given Terraform module, inspect the source code for variables and outputs, and store this information for later use when generating Terraform code that invokes the module.

~> **Note**
AutoCloud does not store the module source remotely, only metadata about the module's source along with the name, type, and defaults of its variables and outputs. For this reason, the local execution context for Terraform, such as the shell environment on the author's computer, must have authentication enabled for the source code, such as a private git repository or a private module registry on Terraform Cloud/Terraform Enterprise.

## Module Source

The `autocloud_module` resource expects a module source to be given using [standard terraform module source configuration](https://developer.hashicorp.com/terraform/language/modules/sources). Some common cases are :

- [Local file](https://developer.hashicorp.com/terraform/language/modules/sources#local-paths)
- [Git repository](https://developer.hashicorp.com/terraform/language/modules/sources#generic-git-repository)
- [Terraform module registry](https://developer.hashicorp.com/terraform/language/modules/sources#terraform-registry)

## Raw Content Injection

There are a number of use cases where adding additional content to the code generated by AutoCloud is desirable. Some common use cases are:

- Passing a provider alias to the module invocation that exists outside of the blueprint
- Adding an explicit dependency to the module invocation that exists outside of the blueprint
- Add internal comments or annotations necessary for tooling and deployment

The keywords `header` and `footer` allow the blueprint author to pass any string data to be added to the generated module invocation. The `header` string will be placed directly after the source configuration arguments, and the `footer` string will be placed directly before the closing brace of the generated module invocation.

-> **Note**
Be aware of Terraform's string [interpolation](https://developer.hashicorp.com/terraform/language/expressions/strings#interpolation) and [escaping](https://developer.hashicorp.com/terraform/language/expressions/strings#escape-sequences-1) when passing raw string data.

!> **Warning**
AutoCloud does not validate raw content that is provided by the blueprint author. Be sure to test your blueprint thoroughly when using this feature.

## Example Usage
```terraform
# A blueprint using this autocloud_module resource:

# KMS Key
resource "autocloud_module" "kms_key" {
  name    = "cpkmskey"
  source  = "cloudposse/kms-key/aws"
  version = "0.12.1"

  header = <<-EOT
  providers = {
    aws = aws.us-east-1
  }
  EOT

  footer = <<-EOT
  depends_on = [
    module.account_baseline # Force account baseline execution before creating keys
  ]
  EOT
}

# Will generate a module invocation like:

module "cpkmskey-clicgi6ii23493208cc54n4x0ik" {
  source  = "cloudposse/kms-key/aws"
  version = "0.12.1"

  providers = {
    aws = aws.us-east-1
  }

  # Configured and collected values appear here
  .
  .
  .
  .

  depends_on = [
    module.account_baseline # Force account baseline execution before creating keys
  ]
}
```

## Argument Reference

The following arguments are supported:

- `footer` - (Optional, String) A raw string value that will be injected into the footer of the module invocation generated by the blueprint end user, directly before the closing brace `}` of the module invocation. Defaults to `null`, no footer.
- `header` - (Optional, String) A raw string value that will be injected into the header of the module invocation generated by the blueprint end user, directly after the `name`, `source`, and `version` configuration arguments. Defaults to `null`, no header.
- `name` - (String) The reference name for the module.
- `source` - (String) The Terraform compliant module source string. See [module source documentation](https://developer.hashicorp.com/terraform/language/modules/sources).
- `tags_variable` - (Optional, String) Name of the module variable where tags are applied. Defaults to `tags`.
- `version` - (Optional, String) The Terraform compliant module version string, must match Terraform conventions, and be valid for the module source type provided.

## Attribute Reference

In addition to all arguments above, the following attributes are exported:

- `blueprint_config` - (String) The autogenerated blueprint configuration that can be passed to an `autocloud_blueprint_config` data resource as a source.
- `config` - (String) The completed form configuration that an `autocloud_blueprint` resource will use to render the data collection form to the end user.
- `id` - (String) The unique identifier for this module on AutoCloud's systems.
- `generated_name` - (String) A reference to the unique module invocation that will be generated, e.g. `module.mymodule-clj5yfcok000008lffmoxabui`.
- `outputs` - (Map of String) A map of strings representing the output connections for the generated module invocation.
- `variables` - (Map of String) A map of strings representing the variable argument connections for the generated module invocation.
